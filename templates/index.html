{% extends "base.html" %}

{% block content %}
<section id="blog" class="section blog-main">
    <div class="container">
        <h2>Latest Blog Posts</h2>
        
        <div class="blog-grid">
            {% for post in posts %}
            <div class="card">
                {% if post.strava_activity_id %}
                <div class="strava-embed-wrapper">
                    <div class="strava-embed-placeholder" 
                         data-embed-type="activity" 
                         data-embed-id="{{ post.strava_activity_id }}" 
                         data-style="standard" 
                         data-from-embed="false">
                    </div>
                </div>
                {% endif %}
                
                {% if post.youtube_id %}
                <div class="youtube-embed-wrapper">
                    <iframe 
                        class="youtube-embed" 
                        src="https://www.youtube.com/embed/{{ post.youtube_id }}" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                    </iframe>
                </div>
                {% endif %}
                
                {% if not post.strava_activity_id and not post.youtube_id %}
                <div class="card-image">{{ post.emoji }}</div>
                {% endif %}
                
                <div class="card-content">
                    <h3>{{ post.title }}</h3>
                    <p>{{ post.excerpt }}</p>
                    

                    
                    <a href="{{ url_for('view_post', post_id=post.id) }}" class="read-more">Read More ‚Üí</a>
                    
                    <div class="card-meta">
                        <span>üìÖ {{ post.date }}</span>
                        <span>üè∑Ô∏è {{ post.category.title() }}</span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        {% if not posts %}
        <div class="no-posts">
            <p>No posts found for this category. Check back soon!</p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}